---
const { testimonials } = Astro.props;
---

<section class="border-b border-neutral-200 bg-neutral-100 px-6 py-24 dark:dark:border-neutral-800 dark:bg-neutral-900">
  <div class="mx-auto max-w-7xl">
    <div class="mb-16 text-center">
      <div class="mx-auto mb-6 inline-flex items-center gap-2 rounded-full border border-blue-500/20 bg-blue-500/10 px-3 py-1.5 text-xs font-medium whitespace-nowrap text-blue-500 sm:mb-8 sm:text-sm">
        <span class="text-xs font-medium text-blue-500 sm:text-sm">{testimonials.badge}</span>
      </div>
      <h2 class="mb-4 text-5xl leading-[0.8] font-bold tracking-tight text-neutral-900 dark:text-neutral-100">{testimonials.title}</h2>
      <p class="mx-auto max-w-xs text-base leading-[1.1] text-neutral-700 md:max-w-xl md:text-lg dark:text-neutral-300">{testimonials.subtitle}</p>
    </div>
    <!-- Carousel Container -->
    <div class="relative">
      <div id="testimonials-carousel" class="scrollbar-hide snap-x snap-mandatory overflow-x-auto">
        <div id="testimonials-track" class="flex">
          {
            testimonials.testimonialsList.map((testimonial: any) => (
              <div class="w-full flex-shrink-0 snap-center px-4">
                <div class="mx-auto max-w-3xl">
                  <div class="overflow-hidden rounded-4xl border border-neutral-200 bg-neutral-50 p-8 md:p-12 dark:dark:border-neutral-800 dark:bg-neutral-950">
                    <blockquote class="mb-8 text-left text-sm leading-relaxed text-neutral-700 md:text-base lg:text-lg dark:text-neutral-300">«{testimonial.quote}»</blockquote>
                    <div class="text-left">
                      <div class="mb-1 text-lg font-semibold text-neutral-900 dark:text-neutral-100">{testimonial.author}</div>
                      <div class="text-sm text-neutral-600 dark:text-neutral-400">
                        {testimonial.role} •{" "}
                        {testimonial.website ? (
                          <a href={testimonial.website} target="_blank" rel="noopener noreferrer" class="hover:underline">
                            {testimonial.company}
                          </a>
                        ) : (
                          testimonial.company
                        )}
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            ))
          }
        </div>
      </div>
      <!-- Indicators -->
      {
        testimonials.testimonialsList.length > 1 && (
          <div class="mt-8 flex justify-center gap-2">
            {testimonials.testimonialsList.map((_: any, index: number) => (
              <button class="testimonial-indicator h-2 w-2 rounded-full bg-neutral-300 hover:cursor-pointer dark:bg-neutral-700" data-index={index} aria-label={`Vai al testimonial ${index + 1}`} />
            ))}
          </div>
        )
      }
    </div>
  </div>
</section>
